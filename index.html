
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jurassic Escape</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Jura:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Jura', sans-serif;
    }

    .jungle-bg {
      background-image: url('assets/bg1.jpg');
      background-size: cover;
      background-position: center;
      animation: pan 40s infinite linear;
    }

    @keyframes pan {
      0% { background-position: 0% 0%; }
      100% { background-position: 100% 0%; }
    }

    .btn {
      transition: transform 0.1s ease, background-color 0.3s ease;
    }

    .btn:active {
      transform: scale(0.95);
    }

    .fossil-button {
      background-color: #a27c1a;
      border: 2px solid #fff1b3;
      font-weight: bold;
      box-shadow: 2px 2px 0 #453b00;
    }

    .fossil-button:hover {
      background-color: #bfa134;
    }

    .center-box {
      background-color: rgba(0, 0, 0, 0.7);
      border: 3px solid #bfa134;
      box-shadow: 0 0 20px #000;
    }
  </style>
</head>
<body class="jungle-bg text-white min-h-screen flex items-center justify-center bg-fixed" id="combined-body">
  <!-- Startpagina -->
  <section id="start-section" class="section active flex flex-col items-center justify-center min-h-screen w-full absolute">
    <div class="text-center p-6 rounded center-box">
      <h1 class="text-5xl font-bold mb-6">ü¶ï Jurassic Escape</h1>
      <button onclick="goToStory()" class="btn fossil-button text-2xl py-3 px-8 rounded">
        Start Spel
      </button>
    </div>
  </section>

  <!-- Verhaalpagina -->
  <section id="story-section" class="section hidden flex flex-col items-center justify-center min-h-screen w-full absolute">
    <div class="text-center max-w-2xl p-6 rounded center-box">
      <p class="text-lg mb-6 leading-relaxed">Je bent bezoeker in Jurassic Park. Plotseling klinkt er een alarmsignaal. Beveiligingssystemen zijn uitgevallen en een gigantische T-Rex is ontsnapt. Jij en een paar anderen rennen naar de poorten, maar die zijn op slot. Om te ontsnappen moet je een reeks raadsels oplossen, snel, voordat het te laat is...</p>
      <button onclick="startGame()" class="btn fossil-button text-xl py-2 px-6 rounded">Begin</button>
    </div>
  </section>

  <!-- Gamepagina -->
  <section id="game-section" class="section hidden flex items-center justify-center min-h-screen w-full absolute">
    <div class="p-8 rounded center-box max-w-xl w-full text-center space-y-4">
      <div id="timer" class="text-lg font-bold text-yellow-300">üïí 05:00</div>
      <div id="intro" class="text-sm italic text-gray-300"></div>
      <h2 id="question" class="text-xl font-bold"></h2>
      <img id="question-image" src="" alt="" class="mx-auto max-h-48 my-2 rounded shadow"/>
      <input type="text" id="answer-input" placeholder="Je antwoord..." class="w-full px-3 py-2 text-black rounded" />
      <div id="feedback" class="text-red-400 font-bold"></div>
      <div class="space-x-2 mt-2">
        <button onclick="submitAnswer()" class="btn fossil-button px-4 py-2 rounded">Antwoord</button>
        <button onclick="showHint()" class="btn fossil-button px-4 py-2 rounded">Hint</button>
      </div>
      <div id="hint" class="text-blue-300 mt-2 hidden"></div>
    </div>
  </section>

  <audio id="bg-sound" loop autoplay>
    <source src="assets/ambience.mp3" type="audio/mp3">
  </audio>

  <script>
    function goToStory() {
      showSection('story-section');
    }

    function startGame() {
      showSection('game-section');
      
    }

    function showSection(id) {
      document.querySelectorAll('.section').forEach(el => el.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
    }

    let riddles = [];
fetch('riddles.json')
  .then(res => res.json())
  .then(data => { riddles = data; showRiddle(); startTimer(); });
    let current = 0;
    let time = 300;
    let timerInterval;

    function showRiddle() {
      if (current >= riddles.length) return win();
      const r = riddles[current];
      document.getElementById("question").textContent = r.question;
      document.getElementById("intro").textContent = r.intro || "";
      document.getElementById("question-image").src = r.image || "";
      document.getElementById("hint").textContent = r.hint || "";
      document.getElementById("hint").classList.add("hidden");
      document.getElementById("answer-input").value = "";
      document.getElementById("feedback").textContent = "";
      document.getElementById("combined-body").style.backgroundImage = r.background ? `url('${r.background}')` : "url('assets/bg1.jpg')";
    }

    function submitAnswer() {
      const input = document.getElementById("answer-input").value.trim().toLowerCase();
      const answer = riddles[current].answer.trim().toLowerCase();
      if (input === answer) {
        current++;
        showRiddle();
      } else {
        time -= 60;
        document.getElementById("feedback").textContent = "Fout! 1 minuut straf.";
      }
    }

    function showHint() {
      document.getElementById("hint").classList.remove("hidden");
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        time--;
        if (time <= 0) return lose();
        const minutes = String(Math.floor(time / 60)).padStart(2, '0');
        const seconds = String(time % 60).padStart(2, '0');
        document.getElementById("timer").textContent = `üïí ${minutes}:${seconds}`;
      }, 1000);
    }

    function win() {
      clearInterval(timerInterval);
      document.body.innerHTML = '<div class="text-center text-white p-8"><h1 class="text-3xl font-bold mb-4">üéâ Je bent ontsnapt!</h1><p>Je hebt alle raadsels opgelost voordat de dino je vond!</p></div>';
      new Audio("assets/win.mp3").play();
    }

    function lose() {
      clearInterval(timerInterval);
      document.body.innerHTML = '<div class="text-center text-white p-8"><h1 class="text-3xl font-bold mb-4">‚è∞ Tijd is op!</h1><p>De T-Rex heeft je ingehaald...</p></div>';
      new Audio("assets/lose.mp3").play();
    }
  </script>
</body>
</html>
